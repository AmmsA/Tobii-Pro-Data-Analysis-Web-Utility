<!DOCTYPE html>
<head>
<meta charset="utf-8">
<style>

	body {
		background-color:#fff;
		margin:0;
	}
	
	#container {
		margin:none;
		border:none;
		padding:none;
		width:100%;
		min-width:700px;
		font-family:sans-serif;
		font-size:16px;
		background-color:white;
	}
	
	#header {
		width:100%;
		height:150px;
		line-height:150px;
		font-size:30px;
		font-weight:bold;
		font-family:sans-serif;
	}
	
	section {
		width: 80%;
		margin:auto;
	}
	
	.substep {
		margin-left:30px;
	}
	
	.step {
		width: 100%;
	}
	
	img {
		height: 125px;
		width: 125px;
		margin:12.5px 40px 12.5px 20px;
		vertical-align: middle;
	}
	
	
	.box {
		margin:20px auto;
		padding:0 20px;
		min-height:50px;
		height:auto;
		line-height:50px;
		width:80%;
		border:1px solid black;
		border-radius:10px;
		background-color:black;
		color:white;
	}
	
	label {
	display:inline-block;
	min-width:80px;
	width:auto;
	margin-left:10px;
	text-align:left;
	line-height:20px;
	height:auto;
	font-size:12px;
	}
	
	#calculate {
		margin:20px auto;
		height:50px;
		line-height:50px;
		width:80%;
		border:1px solid black;
		border-radius:10px;
		background-color:black;
		color:white;
		text-align:center;
	}
</style>
</style>

</head>
<body>
	<div id="container">
	<div id="header"><img src="csulb.png" align="left" />Tobii Eye Tracking Data Analysis</div>
		<section id="uploadSec">
			<p id="step1" class="step">1. Select a file to upload</p>
				<div class="box">
					<input type="file" id="file" />
				</div>
		</section>
		<section id="statSec">
			<p id="step2" class="step">2. Select the desired statistics</p>
			<div class="subsection">
				<p class="substep">A. Dataset Metrics</p>
					<div class="box">
						<label><input type="checkbox" id="validity">&nbsp;Export Validity</input></label>
					</div>
				<p class="substep">B. Descriptive Stats</p>
					<div class="box">
						<label><input type="checkbox" id="fixDur">&nbsp;Fixation Duration</input></label>
						<label><input type="checkbox" id="sacDur">&nbsp;Saccade Duration</input></label>
						<label><input type="checkbox" id="sacLength">&nbsp;Saccade Length</input></label>
						<label><input type="checkbox" id="pupL">&nbsp;Pupil Left</input></label>
						<label><input type="checkbox" id="pupR">&nbsp;Pupil Right</input></label>
						<label><input type="checkbox" id="pupB">&nbsp;Pupil Both</input></label>
						<label><input type="checkbox" id="absAng">&nbsp;Absolute Angles</input></label>
						<label><input type="checkbox" id="relAng">&nbsp;Relative Angles</input></label>
						<label><input type="checkbox" id="dwellAOI">&nbsp;Dwell Time in AOIs</input></label>
					</div>
			</div>
		</section>
		<section id="compSec">
			<p id="step3" class="step">3. Click the button to compute</p>
			<div class="box">
				<button id="compute">Compute</button>
			</div>
		</section>
	</div>
<!-- 
	<div id="statsOut">
		<section id="sumSec"><p class="secTitle">Sum</p><p id="sumOut" class="secNum"></p></section>
		<section id="meanSec"><p class="secTitle">Mean</p><p id="meanOut" class="secNum"></p></section>
		<section id="medianSec"><p class="secTitle">Median</p><p id="medianOut" class="secNum"></p></section>
		<section id="stDevSec"><p class="secTitle">St Dev</p><p id="stDevOut" class="secNum"></p></section>
		<section id="minSec"><p class="secTitle">Min</p><p id="minOut" class="secNum"></p></section>
		<section id="maxSec"><p class="secTitle">Max</p><p id="maxOut" class="secNum"></p></section>
	</div>
 -->
</body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script>


/*
 * Input and Output
 */
 
 document.getElementById("compute").addEventListener('click', function() {
 	
 	var xhr = new XMLHttpRequest();
 	var fd = new FormData();
 
 	fd.append("file", document.getElementById("file").files[0]);
 	fd.append("name", "Drew");
 	
 	xhr.onload = function() {
 		alert(this.response);
 	};
 	
 	xhr.addEventListener('error', function(event) {
 		alert("Error");
 	});
 	
 	xhr.open("POST", "upload.php");
 	
 	xhr.send(fd);
 	
});
 	
function write(stat, val) {
	document.getElementById(stat + "Out").innerHTML = val;
}

function read() {
	return document.getElementById("in").value.split(",");	
}

/*
 * Event Handlers
 */
 
//  document.getElementById("calculate").addEventListener("click", function() {
// 	var data = read();
// 	write("sum", getSum(data))
// 	write("mean", getMean(data));
// 	write("median", getMedian(data));
// 	write("stDev", getStDev(data));
// 	write("min", getMin(data));
// 	write("max", getMax(data));
// 	
// 	var top = $(this).offset().top;
// 	$("html, body").animate({
// 		scrollTop: top
// 	}, 500);
// });

/*
 * Statistics Functions
 */

function getSum(numbers) {
	var sum = 0.0;
	for (var i = 0; i < numbers.length; i++) {
		sum += parseFloat(numbers[i]);
	}
	return sum;
}

function getMean(data) {
	var sum = 0.0;
	for (var i = 0; i < data.length; i++) {
		sum += parseFloat(data[i]);
	}
	
	return sum / data.length;
}

function getMedian(numbers) {
	numbers.sort(function(a, b) {
		return parseInt(a) < parseInt(b);
	});
	
	var middle = Math.floor(numbers.length / 2);
	if (numbers.length % 2 == 1) {
		return numbers[middle];
	}
	else {
		return (parseFloat(numbers[middle - 1]) + parseFloat(numbers[middle])) / 2.0;
	}
}

function getStDev(data) {

	var mean = getMean(data);
	
	var sum = 0.0;
	for (var i = 0; i < data.length; i++) {
		sum += Math.pow(data[i] - mean, 2);
	}
	
	return Math.sqrt(sum / data.length).toFixed(2);
}

function getMin(numbers) {
	return Math.min.apply(Math, numbers);
}

function getMax(numbers) {
	return Math.max.apply(Math, numbers);
}

</script>
</html>